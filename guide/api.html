<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/manifest.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2d89ef"><meta name="msapplication-TileColor" content="#2d89ef"><meta name="theme-color" content="#ffffff"><title>API | room-assistant</title><meta name="description" content="A companion software to bring your home automation to the room-level for presence detection and more.">
    <link rel="modulepreload" href="/assets/app.6fe0e74a.js"><link rel="modulepreload" href="/assets/api.html.470759f0.js"><link rel="modulepreload" href="/assets/api.html.0fc4e189.js"><link rel="prefetch" href="/assets/index.html.e4a65ad0.js"><link rel="prefetch" href="/assets/privacy.html.a213b8fb.js"><link rel="prefetch" href="/assets/index.html.62c29b10.js"><link rel="prefetch" href="/assets/cli.html.a02f44fb.js"><link rel="prefetch" href="/assets/cluster.html.a87e19e0.js"><link rel="prefetch" href="/assets/configuration.html.d70544a5.js"><link rel="prefetch" href="/assets/entities.html.2c816953.js"><link rel="prefetch" href="/assets/installation.html.ab030402.js"><link rel="prefetch" href="/assets/monitoring.html.ef61f2fc.js"><link rel="prefetch" href="/assets/quickstart-ansible.html.55c6fb63.js"><link rel="prefetch" href="/assets/quickstart-docker.html.b67b60db.js"><link rel="prefetch" href="/assets/quickstart-pi-zero-w.html.b762edd3.js"><link rel="prefetch" href="/assets/quickstart-pi.html.d45dca7b.js"><link rel="prefetch" href="/assets/upgrading.html.c3a6f2fc.js"><link rel="prefetch" href="/assets/index.html.fa96d615.js"><link rel="prefetch" href="/assets/bluetooth-classic.html.f652bf41.js"><link rel="prefetch" href="/assets/bluetooth-low-energy.html.0c464e39.js"><link rel="prefetch" href="/assets/gpio.html.b7f05683.js"><link rel="prefetch" href="/assets/grid-eye.html.15818999.js"><link rel="prefetch" href="/assets/home-assistant.html.f315e5b2.js"><link rel="prefetch" href="/assets/mqtt.html.cd940e6a.js"><link rel="prefetch" href="/assets/omron-d6t.html.5fc9f384.js"><link rel="prefetch" href="/assets/shell.html.b714bf5d.js"><link rel="prefetch" href="/assets/xiaomi-mi.html.8ae37b06.js"><link rel="prefetch" href="/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/assets/index.html.a0a61ddc.js"><link rel="prefetch" href="/assets/privacy.html.53201a57.js"><link rel="prefetch" href="/assets/index.html.8b86c0e3.js"><link rel="prefetch" href="/assets/cli.html.f44b057d.js"><link rel="prefetch" href="/assets/cluster.html.49071f9a.js"><link rel="prefetch" href="/assets/configuration.html.ff7f50ae.js"><link rel="prefetch" href="/assets/entities.html.2dd94c2d.js"><link rel="prefetch" href="/assets/installation.html.d7435c90.js"><link rel="prefetch" href="/assets/monitoring.html.23a8aa04.js"><link rel="prefetch" href="/assets/quickstart-ansible.html.d647fbe2.js"><link rel="prefetch" href="/assets/quickstart-docker.html.968dc738.js"><link rel="prefetch" href="/assets/quickstart-pi-zero-w.html.27d0756d.js"><link rel="prefetch" href="/assets/quickstart-pi.html.e86bf2f8.js"><link rel="prefetch" href="/assets/upgrading.html.52192fd5.js"><link rel="prefetch" href="/assets/index.html.c26cb0de.js"><link rel="prefetch" href="/assets/bluetooth-classic.html.1893d5c1.js"><link rel="prefetch" href="/assets/bluetooth-low-energy.html.c8490f9c.js"><link rel="prefetch" href="/assets/gpio.html.b9f13c35.js"><link rel="prefetch" href="/assets/grid-eye.html.9db96913.js"><link rel="prefetch" href="/assets/home-assistant.html.f43b869e.js"><link rel="prefetch" href="/assets/mqtt.html.e69c1e57.js"><link rel="prefetch" href="/assets/omron-d6t.html.f3ac4068.js"><link rel="prefetch" href="/assets/shell.html.d978126a.js"><link rel="prefetch" href="/assets/xiaomi-mi.html.819b1e6d.js"><link rel="prefetch" href="/assets/404.html.0f634cf9.js">
    <link rel="stylesheet" href="/assets/style.0c07b545.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">room-assistant</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">API <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/api.html#websocket-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="WebSocket API"><!--[--><!--]--> WebSocket API <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h1><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>The API is still a work in progress and some features are missing. The existing endpoints will stay compatible within the same major version though.</p></div><p>Each instance of room-assistant exposes an HTTP API that you can use for debugging or connecting it to different services. The API is accessible under port <code>6415</code> by default.</p><p>The API is documented with an OpenAPI schema that you can retrieve under <code>/api-json</code>. For a visual representation navigate to <code>/api</code>. You can make all available API calls directly in your browser from this page.</p><h2 id="websocket-api" tabindex="-1"><a class="header-anchor" href="#websocket-api" aria-hidden="true">#</a> WebSocket API</h2><p>room-assistant also offers a websocket interface, which you can use to subscribe to entity updates. It is hosted on the same port as the HTTP API. To subscribe to updates you can send the following request to the socket:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;event&quot;</span><span class="token operator">:</span> <span class="token string">&quot;subscribeEvents&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;entityUpdates&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will give you a stream of all entity updates in the same format as the <a href="/integrations/mqtt.html#message-format" class="">MQTT integration</a> provides.</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: legovaer@me.com">Levi Govaerts</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.6fe0e74a.js" defer></script>
  </body>
</html>
